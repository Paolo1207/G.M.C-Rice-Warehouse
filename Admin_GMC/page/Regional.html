<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regional Insights - GMC Admin</title>
    <link rel="stylesheet" href="../css/Sidebar.css">
    <link rel="stylesheet" href="../css/Regional.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar directly embedded -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-top">
        <div class="sidebar-brand">
          <img src="../image/logo_of_gmc.png" alt="GMC Logo" class="sidebar-logo-img">
        </div>
        <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
          <svg width="24" height="24" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke="#2e7d32" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <nav class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-section">
          <div class="sidebar-section-title">Main</div>
          <ul>
            <li class="active" title="Dashboard"><a href="Dashboard.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="13" width="7" height="8" rx="2"/><rect x="14" y="3" width="7" height="18" rx="2"/></svg> </span><span class="sidebar-label">Dashboard</span></a></li>
            <li title="Analytics"><a href="Analytics.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg> </span><span class="sidebar-label">Analytics</span></a></li>
            <li title="Forecast"><a href="Forecast.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 17l6-6 4 4 8-8"/><path d="M14 7h7v7"/></svg> </span><span class="sidebar-label">Forecast</span></a></li>
            <li title="Regional Insights"><a href="Regional.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"/></svg> </span><span class="sidebar-label">Regional Insights</span></a></li>
          </ul>
        </div>
        <div class="sidebar-section-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-title">Operations</div>
          <ul>
            <li title="Inventory"><a href="Inventory.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4"/><path d="M8 3v4"/></svg> </span><span class="sidebar-label">Inventory</span></a></li>
            <li title="Sales"><a href="Sales.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 17l6-6 4 4 8-8"/></svg> </span><span class="sidebar-label">Sales</span></a></li>
            <li title="Deliver"><a href="Deliver.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16,8 20,8 23,11 23,16 16,16 16,8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg> </span><span class="sidebar-label">Deliver</span></a></li>
            <li title="Purchase"><a href="Purchase.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4"/><path d="M8 3v4"/></svg> </span><span class="sidebar-label">Purchase</span></a></li>
          </ul>
        </div>
        <div class="sidebar-section-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-title">Management</div>
          <ul>
            <li title="Reports"><a href="Reports.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg> </span><span class="sidebar-label">Reports</span></a></li>
            <li title="User Management"><a href="User.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="7" r="4"/><path d="M5.5 21a8.38 8.38 0 0 1 13 0"/></svg> </span><span class="sidebar-label">User Management</span></a></li>
            <li title="Notifications"><a href="Notifications.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg> </span><span class="sidebar-label">Notifications</span></a></li>
          </ul>
        </div>
      </nav>
      <div class="sidebar-profile" style="display: flex; align-items: center; justify-content: center; height: 25px;">
        <div class="sidebar-profile-info" style="text-align: center; width: 100%; display: flex; align-items: center; justify-content: center;">
          <div class="sidebar-profile-name" style="margin: 0 auto;">Admin</div>
        </div>
      </div>
      <div class="sidebar-bottom">
        <ul>
          <li title="Settings" style="display: flex; align-items: center; justify-content: center; height: 25px;">
            <a href="Settings.html" style="text-align: center; width: 100%; display: flex; align-items: center; justify-content: center;">
              <span class="sidebar-label" style="margin: 0 auto;">Settings</span>
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <script>
      // Sidebar collapse/expand logic
      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.getElementById('sidebarToggle');
      toggleBtn.onclick = () => {
        sidebar.classList.toggle('collapsed');
        document.body.classList.toggle('sidebar-collapsed', sidebar.classList.contains('collapsed'));
      };
    </script>
    <!-- End Sidebar -->
    <div class="main-content">
        <div class="regional-header glass-card">
            <div class="regional-title-section" style="display: flex; align-items: center; gap: 16px;">
                <span style="display: flex; align-items: center;">
                  <span style="display: inline-block; width: 32px; height: 32px; background: #2e7d32; border-radius: 6px; margin-right: 8px;"></span>
                </span>
                <div>
                  <h2 style="font-size:2.3rem; font-weight:800; color:#2e7d32; margin:0; letter-spacing:-1px;">Regional Insights</h2>
                  <div style="font-size:1.08rem; color:#64748b; font-weight:500; margin-top:2px;">
                    Centralized view of inventory, sales, and demand-supply conditions across all branches
                  </div>
                </div>
            </div>
        </div>
        <div class="regional-controls glass-card">
            <div class="regional-filter-group">
                <label for="product-select">Product:</label>
                <select id="product-select">
                    <option value="all">All Products</option>
                    <option value="sinandomeng">Sinandomeng</option>
                    <option value="dinorado">Dinorado</option>
                    <option value="jasmine">Jasmine</option>
                    <option value="basmati">Basmati</option>
                    <option value="brown">Brown Rice</option>
                    <option value="red">Red Rice</option>
                </select>
            </div>
            <div class="regional-filter-group">
                <label for="category-select">Category:</label>
                <select id="category-select">
                    <option value="all">All Categories</option>
                    <option value="premium">Premium</option>
                    <option value="regular">Regular</option>
                </select>
            </div>
            <div class="regional-filter-group">
                <label for="region-select">Region/Branch:</label>
                <select id="region-select">
                    <option value="all">All Branches</option>
                    <option value="marawoy">Marawoy</option>
                    <option value="malvar">Malvar</option>
                    <option value="bulacnin">Bulacnin</option>
                    <option value="bulacnin-main">Bulacnin Main</option>
                    <option value="boac">Boac</option>
                    <option value="sta-cruz">Sta. Cruz</option>
                </select>
            </div>
        </div>
        <div class="regional-widgets-row">
            <div class="glass-card regional-widget">
                <h3>üè¢ Branch Stock Levels Overview</h3>
                <canvas id="branchStockChart" height="180"></canvas>
            </div>
            <div class="glass-card regional-widget">
                <h3>üìà Sales Performance by Region</h3>
                <canvas id="salesPerformanceChart" height="180"></canvas>
            </div>
            <div class="glass-card regional-widget">
                <h3>‚öñÔ∏è Demand & Supply Gaps</h3>
                <div class="regional-gap-list">
                    <div class="regional-gap-item critical">
                        <span class="gap-branch">Bulacnin Main</span>
                        <span class="gap-product">Dinorado</span>
                        <span class="gap-status">Shortage: 200kg</span>
                    </div>
                    <div class="regional-gap-item warning">
                        <span class="gap-branch">Sta. Cruz</span>
                        <span class="gap-product">Sinandomeng</span>
                        <span class="gap-status">Surplus: 150kg</span>
                    </div>
                    <div class="regional-gap-item info">
                        <span class="gap-branch">Marawoy</span>
                        <span class="gap-product">Jasmine</span>
                        <span class="gap-status">Balanced</span>
                    </div>
                </div>
            </div>
            <div class="glass-card regional-widget">
                <h3>üîÆ Regional Forecasting Data</h3>
                <canvas id="regionalForecastChart" height="180"></canvas>
            </div>
        </div>
    </div>
    <script>
        // Branch Stock Levels Overview
        const stockCtx = document.getElementById('branchStockChart').getContext('2d');
        new Chart(stockCtx, {
            type: 'bar',
            data: {
                labels: ['Marawoy', 'Malvar', 'Bulacnin', 'Bulacnin Main', 'Boac', 'Sta. Cruz'],
                datasets: [{
                    label: 'Stock (kg)',
                    data: [8500, 7200, 9100, 7800, 6500, 8200],
                    backgroundColor: [
                        '#2e7d32', '#3b82f6', '#f59e0b', '#8b5cf6', '#059669', '#dc2626'
                    ],
                    borderWidth: 2,
                    borderRadius: 8,
                    borderSkipped: false
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        // Sales Performance by Region
        const salesCtx = document.getElementById('salesPerformanceChart').getContext('2d');
        new Chart(salesCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [
                    {
                        label: 'Marawoy',
                        data: [1200, 1300, 1250, 1400, 1350, 1500, 1450],
                        borderColor: '#2e7d32',
                        backgroundColor: 'rgba(46, 125, 50, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Malvar',
                        data: [1100, 1200, 1150, 1300, 1250, 1400, 1350],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Bulacnin',
                        data: [1400, 1500, 1450, 1600, 1550, 1700, 1650],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Bulacnin Main',
                        data: [1300, 1400, 1350, 1500, 1450, 1600, 1550],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Boac',
                        data: [1000, 1100, 1050, 1200, 1150, 1300, 1250],
                        borderColor: '#059669',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Sta. Cruz',
                        data: [1250, 1350, 1300, 1450, 1400, 1550, 1500],
                        borderColor: '#dc2626',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: { responsive: true, plugins: { legend: { position: 'top' } } }
        });
        // Regional Forecasting Data
        const forecastCtx = document.getElementById('regionalForecastChart').getContext('2d');
        new Chart(forecastCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [
                    {
                        label: 'Predicted Demand',
                        data: [1300, 1400, 1350, 1500, 1450, 1600, 1550],
                        borderColor: '#2e7d32',
                        backgroundColor: 'rgba(46, 125, 50, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Predicted Price',
                        data: [42, 43, 44, 43.5, 44.2, 45, 44.8],
                        borderColor: '#ff9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: {
                    y: { beginAtZero: true },
                    y1: {
                        position: 'right',
                        beginAtZero: false,
                        grid: { drawOnChartArea: false },
                        ticks: { color: '#ff9800' }
                    }
                }
            }
        });
    </script>
</body>
</html>