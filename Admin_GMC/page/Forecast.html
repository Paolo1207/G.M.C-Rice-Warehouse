<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forecast - GMC Admin</title>
    <link rel="stylesheet" href="../css/Sidebar.css">
    <link rel="stylesheet" href="../css/Forecast.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar directly embedded -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-top">
        <div class="sidebar-brand">
          <img src="../image/logo_of_gmc.png" alt="GMC Logo" class="sidebar-logo-img">
        </div>
        <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
          <svg width="24" height="24" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke="#2e7d32" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <nav class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-section">
          <div class="sidebar-section-title">Main</div>
          <ul>
            <li class="active" title="Dashboard"><a href="Dashboard.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="13" width="7" height="8" rx="2"/><rect x="14" y="3" width="7" height="18" rx="2"/></svg> </span><span class="sidebar-label">Dashboard</span></a></li>
            <li title="Analytics"><a href="Analytics.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg> </span><span class="sidebar-label">Analytics</span></a></li>
            <li title="Forecast"><a href="Forecast.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 17l6-6 4 4 8-8"/><path d="M14 7h7v7"/></svg> </span><span class="sidebar-label">Forecast</span></a></li>
            <li title="Regional Insights"><a href="Regional.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"/></svg> </span><span class="sidebar-label">Regional Insights</span></a></li>
          </ul>
        </div>
        <div class="sidebar-section-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-title">Operations</div>
          <ul>
            <li title="Inventory"><a href="Inventory.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4"/><path d="M8 3v4"/></svg> </span><span class="sidebar-label">Inventory</span></a></li>
            <li title="Sales"><a href="Sales.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 17l6-6 4 4 8-8"/></svg> </span><span class="sidebar-label">Sales</span></a></li>
            <li title="Deliver"><a href="Deliver.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16,8 20,8 23,11 23,16 16,16 16,8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg> </span><span class="sidebar-label">Deliver</span></a></li>
            <li title="Purchase"><a href="Purchase.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4"/><path d="M8 3v4"/></svg> </span><span class="sidebar-label">Purchase</span></a></li>
          </ul>
        </div>
        <div class="sidebar-section-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-title">Management</div>
          <ul>
            <li title="Reports"><a href="Reports.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg> </span><span class="sidebar-label">Reports</span></a></li>
            <li title="User Management"><a href="User.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="7" r="4"/><path d="M5.5 21a8.38 8.38 0 0 1 13 0"/></svg> </span><span class="sidebar-label">User Management</span></a></li>
            <li title="Notifications"><a href="Notifications.html"><span class="sidebar-icon"> <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg> </span><span class="sidebar-label">Notifications</span></a></li>
          </ul>
        </div>
      </nav>
      <div class="sidebar-profile" style="display: flex; align-items: center; justify-content: center; height: 25px;">
        <div class="sidebar-profile-info" style="text-align: center; width: 100%; display: flex; align-items: center; justify-content: center;">
          <div class="sidebar-profile-name" style="margin: 0 auto;">Admin</div>
        </div>
      </div>
      <div class="sidebar-bottom">
        <ul>
          <li title="Settings" style="display: flex; align-items: center; justify-content: center; height: 25px;">
            <a href="Settings.html" style="text-align: center; width: 100%; display: flex; align-items: center; justify-content: center;">
              <span class="sidebar-label" style="margin: 0 auto;">Settings</span>
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <script>
      // Sidebar collapse/expand logic
      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.getElementById('sidebarToggle');
      toggleBtn.onclick = () => {
        sidebar.classList.toggle('collapsed');
        document.body.classList.toggle('sidebar-collapsed', sidebar.classList.contains('collapsed'));
      };
    </script>
    <!-- End Sidebar -->
    <div class="main-content">
        <div class="forecast-header glass-card">
            <div class="forecast-title-section" style="display: flex; align-items: center; gap: 16px;">
                <span style="display: flex; align-items: center;">
                  <span style="display: inline-block; width: 32px; height: 32px; background: #2e7d32; border-radius: 6px; margin-right: 8px;"></span>
                </span>
                <div>
                  <h2 style="font-size:2.3rem; font-weight:800; color:#2e7d32; margin:0; letter-spacing:-1px;">Forecast</h2>
                  <div style="font-size:1.08rem; color:#64748b; font-weight:500; margin-top:2px;">
                    Data-driven rice demand, price, and stock risk forecasting for all branches
                  </div>
                </div>
            </div>
        </div>
        <div class="forecast-controls glass-card">
            <div class="forecast-filter-group">
                <label for="branch-select">Branch:</label>
                <select id="branch-select">
                    <option value="all">All Branches</option>
                    <option value="marawoy">Marawoy</option>
                    <option value="lima">Lima</option>
                    <option value="malvar">Malvar</option>
                    <option value="bulacnin">Bulacnin</option>
                    <option value="bulacnin-main">Bulacnin Main</option>
                    <option value="boac">Boac</option>
                    <option value="sta-cruz">Sta. Cruz</option>
                </select>
            </div>
            <div class="forecast-filter-group">
                <label for="variant-select">Rice Variant:</label>
                <select id="variant-select">
                    <option value="all">All Variants</option>
                    <option value="sinandomeng">Sinandomeng</option>
                    <option value="dinorado">Dinorado</option>
                    <option value="jasmine">Jasmine</option>
                    <option value="basmati">Basmati</option>
                    <option value="brown">Brown Rice</option>
                    <option value="red">Red Rice</option>
                </select>
            </div>
            <div class="forecast-filter-group">
                <label for="forecast-type-select">Forecast Type:</label>
                <select id="forecast-type-select">
                    <option value="demand">Demand Forecast</option>
<option value="price">Price Trend</option>
<option value="demand-vs-actual">Demand vs. Actual Sales</option>
<option value="stock-risk">Stock Risk View</option>
<option value="forecast-accuracy">Branch-wise Forecast Accuracy</option>
<option value="confidence-level">Confidence Level Distribution</option>
<option value="inventory-turnover">Inventory Turnover Forecast</option>
<option value="overstock-shortage">Predicted Overstock/Shortage Events</option>
<option value="monthly-revenue">Monthly Revenue Forecast</option>
<option value="variant-comparison">Product Variant Demand Comparison</option>
<option value="branch-heatmap">Branch Demand Heatmap</option>

                </select>
            </div>
            <div class="forecast-filter-group">
                <label for="time-range-select">Time Range:</label>
                <select id="time-range-select">
                    <option value="7">Next 7 days</option>
                    <option value="30">Next 30 days</option>
                    <option value="90">Next 90 days</option>
                </select>
            </div>
            <button class="forecast-run-btn">Run Forecast</button>
            <div class="forecast-export-group">
                <label>Export:</label>
                <button class="export-btn">PDF</button>
                <button class="export-btn">Excel</button>
                <button class="export-btn">CSV</button>
            </div>
        </div>
        <div class="forecast-alerts glass-card">
            <div class="alerts-header">
                <h3>🔔 Smart Alerts</h3>
            </div>
            <div class="alerts-list">
                <div class="alert-item critical">
                    <span class="alert-icon">⚠️</span>
                    <span class="alert-message">Expected demand spike in <b>Bulacnin Main</b> for Sinandomeng (next 7 days)</span>
                </div>
                <div class="alert-item warning">
                    <span class="alert-icon">📉</span>
                    <span class="alert-message">Overstock warning for Dinorado in <b>Sta. Cruz</b></span>
                </div>
                <div class="alert-item info">
                    <span class="alert-icon">📊</span>
                    <span class="alert-message">All branches: Model accuracy above 91%</span>
                </div>
            </div>
        </div>
        <div class="forecast-summary glass-card">
            <h3>📋 Forecast Summary</h3>
            <table class="forecast-table">
                <thead>
                    <tr>
                        <th>Branch</th>
                        <th>Variant</th>
                        <th>Forecasted Value</th>
                        <th>Type</th>
                        <th>Model Accuracy</th>
                        <th>Confidence</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Marawoy</td>
                        <td>Sinandomeng</td>
                        <td>1,230 bags</td>
                        <td>Demand</td>
                        <td>91.2%</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Bulacnin Main</td>
                        <td>Sinandomeng</td>
                        <td>1,540 bags</td>
                        <td>Demand</td>
                        <td>92.5%</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Sta. Cruz</td>
                        <td>Dinorado</td>
                        <td>2,100 bags</td>
                        <td>Stock Risk (Overstock)</td>
                        <td>90.8%</td>
                        <td>Medium</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="forecast-visuals">
            <div class="glass-card forecast-chart-card">
                <h3>📈 Demand Forecast (Line Graph)</h3>
                <canvas id="demandForecastChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>💲 Price Trend</h3>
                <canvas id="priceTrendChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>📊 Demand vs. Actual Sales</h3>
                <canvas id="demandVsActualChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🚦 Stock Risk View</h3>
                <canvas id="stockRiskChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🏢 Branch-wise Forecast Accuracy</h3>
                <canvas id="branchAccuracyChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🔒 Confidence Level Distribution</h3>
                <canvas id="confidenceLevelChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🔄 Inventory Turnover Forecast</h3>
                <canvas id="turnoverForecastChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>⚠️ Predicted Overstock/Shortage Events</h3>
                <canvas id="overstockShortageChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>💰 Monthly Revenue Forecast</h3>
                <canvas id="revenueForecastChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🌾 Product Variant Demand Comparison</h3>
                <canvas id="variantDemandChart" height="180"></canvas>
            </div>
            <div class="glass-card forecast-chart-card">
                <h3>🗺️ Branch Demand Heatmap</h3>
                <canvas id="branchHeatmapChart" height="180"></canvas>
            </div>
        </div>
    </div>
    <script>
        // Example Chart.js initialization for demo
        const demandCtx = document.getElementById('demandForecastChart').getContext('2d');
        new Chart(demandCtx, {
            type: 'line',
            data: {
                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                datasets: [{
                    label: 'Forecasted Demand',
                    data: [1200, 1300, 1250, 1400, 1350, 1500, 1450],
                    borderColor: '#2e7d32',
                    backgroundColor: 'rgba(46, 125, 50, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        const priceCtx = document.getElementById('priceTrendChart').getContext('2d');
        new Chart(priceCtx, {
            type: 'line',
            data: {
                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                datasets: [{
                    label: 'Price per Bag',
                    data: [42, 43, 44, 43.5, 44.2, 45, 44.8],
                    borderColor: '#ff9800',
                    backgroundColor: 'rgba(255, 152, 0, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        const actualCtx = document.getElementById('demandVsActualChart').getContext('2d');
        new Chart(actualCtx, {
            type: 'bar',
            data: {
                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                datasets: [
                    {
                        label: 'Forecasted',
                        data: [1200, 1300, 1250, 1400, 1350, 1500, 1450],
                        backgroundColor: 'rgba(46, 125, 50, 0.7)'
                    },
                    {
                        label: 'Actual Sales',
                        data: [1180, 1280, 1270, 1380, 1330, 1480, 1430],
                        backgroundColor: 'rgba(59, 130, 246, 0.7)'
                    }
                ]
            },
            options: { responsive: true, plugins: { legend: { position: 'top' } } }
        });
        const riskCtx = document.getElementById('stockRiskChart').getContext('2d');
        new Chart(riskCtx, {
            type: 'doughnut',
            data: {
                labels: ['Safe', 'Overstock', 'Shortage'],
                datasets: [{
                    data: [65, 20, 15],
                    backgroundColor: ['#2e7d32', '#f59e0b', '#e53935'],
                    borderWidth: 0
                }]
            },
            options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
        });
        // Additional sample charts for new graphs
        const branchAccCtx = document.getElementById('branchAccuracyChart').getContext('2d');
        new Chart(branchAccCtx, {
            type: 'bar',
            data: {
                labels: ['Marawoy', 'Lima', 'Malvar', 'Bulacnin', 'Bulacnin Main', 'Boac', 'Sta. Cruz'],
                datasets: [{
                    label: 'Accuracy (%)',
                    data: [91, 89, 87, 92, 90, 88, 91],
                    backgroundColor: 'rgba(46, 125, 50, 0.7)'
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        const confLevelCtx = document.getElementById('confidenceLevelChart').getContext('2d');
        new Chart(confLevelCtx, {
            type: 'pie',
            data: {
                labels: ['High', 'Medium', 'Low'],
                datasets: [{
                    data: [60, 30, 10],
                    backgroundColor: ['#2e7d32', '#fbbf24', '#e53935']
                }]
            },
            options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
        });
        const turnoverCtx = document.getElementById('turnoverForecastChart').getContext('2d');
        new Chart(turnoverCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [{
                    label: 'Turnover Rate',
                    data: [3.2, 3.5, 3.8, 4.0, 4.1, 4.3, 4.5],
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        const overstockCtx = document.getElementById('overstockShortageChart').getContext('2d');
        new Chart(overstockCtx, {
            type: 'bar',
            data: {
                labels: ['Marawoy', 'Lima', 'Malvar', 'Bulacnin', 'Bulacnin Main', 'Boac', 'Sta. Cruz'],
                datasets: [
                    {
                        label: 'Overstock Events',
                        data: [2, 1, 0, 3, 2, 1, 0],
                        backgroundColor: 'rgba(251, 191, 36, 0.7)'
                    },
                    {
                        label: 'Shortage Events',
                        data: [0, 1, 2, 0, 1, 2, 3],
                        backgroundColor: 'rgba(229, 57, 53, 0.7)'
                    }
                ]
            },
            options: { responsive: true, plugins: { legend: { position: 'top' } } }
        });
        const revenueCtx = document.getElementById('revenueForecastChart').getContext('2d');
        new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [{
                    label: 'Revenue ($)',
                    data: [120000, 130000, 125000, 140000, 135000, 150000, 145000],
                    borderColor: '#059669',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
        const variantCtx = document.getElementById('variantDemandChart').getContext('2d');
        new Chart(variantCtx, {
            type: 'radar',
            data: {
                labels: ['Sinandomeng', 'Dinorado', 'Jasmine', 'Basmati', 'Brown', 'Red'],
                datasets: [{
                    label: 'Forecasted Demand',
                    data: [1200, 1100, 1300, 900, 800, 700],
                    backgroundColor: 'rgba(46, 125, 50, 0.2)',
                    borderColor: '#2e7d32',
                    borderWidth: 2,
                    pointBackgroundColor: '#2e7d32'
                }]
            },
            options: { responsive: true, plugins: { legend: { position: 'top' } } }
        });
        const heatmapCtx = document.getElementById('branchHeatmapChart').getContext('2d');
        new Chart(heatmapCtx, {
            type: 'bar',
            data: {
                labels: ['Marawoy', 'Lima', 'Malvar', 'Bulacnin', 'Bulacnin Main', 'Boac', 'Sta. Cruz'],
                datasets: [
                    {
                        label: 'Demand Intensity',
                        data: [80, 70, 60, 90, 75, 65, 85],
                        backgroundColor: [
                            '#2e7d32', '#3b82f6', '#f59e0b', '#8b5cf6', '#ec4899', '#059669', '#dc2626'
                        ]
                    }
                ]
            },
            options: { responsive: true, plugins: { legend: { display: false } } }
        });
    </script>
</body>
</html>